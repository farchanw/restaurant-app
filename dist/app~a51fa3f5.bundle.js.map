{"version":3,"file":"app~a51fa3f5.bundle.js","mappings":"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","sources":["webpack://restaurant-apps/./src/scripts/data/favorite.js","webpack://restaurant-apps/./src/scripts/globals/api-endpoint.js","webpack://restaurant-apps/./src/scripts/data/source.js","webpack://restaurant-apps/./src/scripts/globals/config.js","webpack://restaurant-apps/./src/scripts/utils/sw-register.js","webpack://restaurant-apps/./src/scripts/index.js","webpack://restaurant-apps/./src/scripts/routes/routes.js","webpack://restaurant-apps/./src/scripts/routes/url-parser.js","webpack://restaurant-apps/./src/scripts/utils/drawer-initiator.js","webpack://restaurant-apps/./src/scripts/utils/like-button-presenter.js"],"sourcesContent":["import { openDB } from 'idb';\nimport CONFIG from '../globals/config';\n\nconst { DATABASE_NAME, DATABASE_VERSION, OBJECT_STORE_NAME } = CONFIG;\n\nconst dbPromise = openDB(DATABASE_NAME, DATABASE_VERSION, {\n  upgrade(database) {\n    database.createObjectStore(OBJECT_STORE_NAME, { keyPath: 'id' });\n  },\n});\n\nconst FavoriteIdb = {\n  async getRestaurant(id) {\n    if (!id) {\n      return;\n    }\n    // eslint-disable-next-line consistent-return\n    return (await dbPromise).get(OBJECT_STORE_NAME, id);\n  },\n  async getAllRestaurants() {\n    return (await dbPromise).getAll(OBJECT_STORE_NAME);\n  },\n  async putRestaurant(restaurant) {\n    // eslint-disable-next-line no-prototype-builtins\n    if (!restaurant.hasOwnProperty('id')) {\n      return;\n    }\n    // eslint-disable-next-line consistent-return\n    return (await dbPromise).put(OBJECT_STORE_NAME, restaurant);\n  },\n  async deleteRestaurant(id) {\n    return (await dbPromise).delete(OBJECT_STORE_NAME, id);\n  },\n};\n\nexport default FavoriteIdb;\n","import CONFIG from './config';\n\nconst API_ENDPOINT = {\n  LIST: `${CONFIG.BASE_URL}list`,\n  DETAIL: (id) => `${CONFIG.BASE_URL}detail/${id}`,\n};\nexport default API_ENDPOINT;\n","import API_ENDPOINT from '../globals/api-endpoint';\n\nclass DataSource {\n  static async list() {\n    const fetchData = await fetch(API_ENDPOINT.LIST)\n      .then((response) => response.json())\n      .catch((error) => error);\n\n    return (fetchData.restaurants) ?? fetchData;\n  }\n\n  static async detail(id) {\n    const fetchData = await fetch(API_ENDPOINT.DETAIL(id))\n      .then((response) => response.json())\n      .catch((error) => error);\n\n    return (fetchData.restaurant) ?? fetchData;\n  }\n}\n\nexport default DataSource;\n","const CONFIG = {\n  KEY: 'YOUR_API_KEY',\n  BASE_URL: 'https://restaurant-api.dicoding.dev/',\n  BASE_IMAGE_URL: 'https://restaurant-api.dicoding.dev/images/',\n  CACHE_NAME: 'resto-mania-v1',\n  DATABASE_NAME: 'resto-mania-database',\n  DATABASE_VERSION: 1,\n  OBJECT_STORE_NAME: 'restaurant',\n};\n\nexport default CONFIG;\n","import * as WorkboxWindow from 'workbox-window';\n\nconst swRegister = async () => {\n  if (!('serviceWorker' in navigator)) {\n    throw new Error('Service Worker not supported in the browser');\n  }\n\n  const wb = new WorkboxWindow.Workbox('./sw.bundle.js');\n\n  try {\n    await wb.register();\n  } catch (error) {\n    throw new Error('Failed to register service worker');\n  }\n};\n\nexport default swRegister;\n","import 'regenerator-runtime'; /* for async await transpile */\nimport '../styles/main.css';\nimport App from '../views/app';\nimport swRegister from './utils/sw-register';\nimport 'lazysizes';\nimport 'lazysizes/plugins/parent-fit/ls.parent-fit';\n\nconst app = new App({\n  button: document.querySelectorAll('.hamburger'),\n  drawer: document.querySelector('#drawer .navbar-menu'),\n  content: document.querySelector('#content'),\n});\n\nwindow.addEventListener('hashchange', () => {\n  app.renderPage();\n});\n\nwindow.addEventListener('load', () => {\n  app.renderPage();\n  swRegister();\n});\n","import Home from '../../views/home';\nimport Detail from '../../views/detail';\nimport Favorite from '../../views/favorite';\n\nconst routes = {\n  '/': Home, // default page\n  '/detail/:id': Detail,\n  '/favorite': Favorite,\n};\n\nexport default routes;\n","/* eslint-disable no-underscore-dangle */\nconst UrlParser = {\n  parseActiveUrlWithCombiner() {\n    const url = window.location.hash.slice(1).toLowerCase();\n    const splitedUrl = this._urlSplitter(url);\n    return this._urlCombiner(splitedUrl);\n  },\n\n  parseActiveUrlWithoutCombiner() {\n    const url = window.location.hash.slice(1).toLowerCase();\n    return this._urlSplitter(url);\n  },\n\n  _urlSplitter(url) {\n    const urlsSplits = url.split('/');\n    return {\n      resource: urlsSplits[1] || null,\n      id: urlsSplits[2] || null,\n      verb: urlsSplits[3] || null,\n    };\n  },\n\n  _urlCombiner(splitedUrl) {\n    return (splitedUrl.resource ? `/${splitedUrl.resource}` : '/')\n      + (splitedUrl.id ? '/:id' : '')\n      + (splitedUrl.verb ? `/${splitedUrl.verb}` : '');\n  },\n};\n\nexport default UrlParser;\n","/* eslint-disable no-underscore-dangle */\nconst DrawerInitiator = {\n  init({ button, drawer, content }) {\n    button.forEach((element) => {\n      element.addEventListener('click', (event) => {\n        this._toggleDrawer(event, drawer);\n      });\n    });\n\n    content.addEventListener('click', (event) => {\n      this._closeDrawer(event, drawer);\n    });\n  },\n\n  _toggleDrawer(event, drawer) {\n    drawer.classList.toggle('open');\n    event.stopPropagation();\n  },\n\n  _closeDrawer(event, drawer) {\n    event.stopPropagation();\n    drawer.classList.remove('open');\n  },\n};\n\nexport default DrawerInitiator;\n","/* eslint-disable no-underscore-dangle */\nimport FavoriteIdb from '../data/favorite';\nimport { createLikeButtonTemplate, createUnlikeButtonTemplate } from '../../templates/template-creator';\n\nconst LikeButtonPresenter = {\n  async init({ likeButtonContainer, restaurant }) {\n    this._likeButtonContainer = likeButtonContainer;\n    this._restaurant = restaurant;\n\n    await this._renderButton();\n  },\n\n  async _renderButton() {\n    const { id } = this._restaurant;\n\n    if (await this._isRestaurantExist(id)) {\n      this._renderLiked();\n    } else {\n      this._renderLike();\n    }\n  },\n\n  async _isRestaurantExist(id) {\n    const restaurant = await FavoriteIdb.getRestaurant(id);\n    return !!restaurant;\n  },\n\n  _renderLike() {\n    this._likeButtonContainer.innerHTML = createLikeButtonTemplate();\n\n    const likeButton = document.querySelector('#likeButton');\n    likeButton.addEventListener('click', async () => {\n      await FavoriteIdb.putRestaurant(this._restaurant);\n      this._renderButton();\n    });\n  },\n\n  _renderLiked() {\n    this._likeButtonContainer.innerHTML = createUnlikeButtonTemplate();\n\n    const likeButton = document.querySelector('#likeButton');\n    likeButton.addEventListener('click', async () => {\n      await FavoriteIdb.deleteRestaurant(this._restaurant.id);\n      this._renderButton();\n    });\n  },\n};\n\nexport default LikeButtonPresenter;\n"],"names":["i","DATABASE_NAME","CONFIG","DATABASE_VERSION","OBJECT_STORE_NAME","dbPromise","openDB","upgrade","database","createObjectStore","keyPath","getRestaurant","id","get","getAllRestaurants","getAll","putRestaurant","restaurant","hasOwnProperty","put","deleteRestaurant","LIST","DETAIL","DataSource","fetch","API_ENDPOINT","then","response","json","error","fetchData","restaurants","KEY","BASE_URL","BASE_IMAGE_URL","CACHE_NAME","navigator","Error","wb","WorkboxWindow","register","app","App","button","document","querySelectorAll","drawer","querySelector","content","window","addEventListener","renderPage","swRegister","Home","Detail","Favorite","parseActiveUrlWithCombiner","url","location","hash","slice","toLowerCase","splitedUrl","this","_urlSplitter","_urlCombiner","parseActiveUrlWithoutCombiner","urlsSplits","split","resource","verb","init","forEach","element","event","_toggleDrawer","_closeDrawer","classList","toggle","stopPropagation","remove","likeButtonContainer","_likeButtonContainer","_restaurant","_renderButton","_isRestaurantExist","_renderLiked","_renderLike","FavoriteIdb","innerHTML","createLikeButtonTemplate","createUnlikeButtonTemplate"],"sourceRoot":""}